<!DOCTYPE html>
<html>
    <head>
		<title>Redis via Node</title>
    </head>
    <body>
        <h2>Redis Via Node</h2>
        <div>This HTTP Server runs under Node and
		<ol>
		<li>implements basic HTTP functionality</li>
		<li>allows you to run basic Redis commands via URLs with QueryStrings (examples below).</div>
		<h3>Redis Client</h3>
		<p>Data has been loaded for you.  You can see the players (ZSET - sorted set) by running the command on the redis-cli console:
		</p>
		<div><img src="images/ClientZrange.png"/></div>
		<h2>Try These Redis Commands (all load in a new tab/window)</h2>
		<h3> Add New Player - Player:300</h3>
		<p><a href="http://localhost:7979/redis/?add=true&playerId=player:300&score=889" target="_blank">http://localhost:7979/redis/?add=true&playerId=player:300&score=889</a>
		</p>
		<h3>Get All Players</h3>
		<p>Display a list of all players and their scores.</p>
		<p><a href="http://localhost:7979/getPlayers" target="_blank">http://localhost:7979/getPlayers</a></p>
		<h3>Add Custom New Player</h3>
		<p><button onclick="addNewPlayer()">Add Player</button> <== Generates random player and score and adds it to Redis cache.</p>
		<script>
			function addNewPlayer(){
				var idText = "randomPlayer";
				deleteNode(idText);
				var playerId = "player:" + (Math.floor(Math.random() * 3000) + 500);
				var score = Math.floor(Math.random() * 2500) + 100;
				var link = "http://localhost:7979/redis/?add=true&playerId=" + playerId + "&score=" + score;
				var a = document.createElement('a');
  				var linkText = document.createTextNode(link);
  				a.appendChild(linkText);
  				a.title = link;
				a.href = link;
				a.id = idText;
				a.target="_blank";
				document.body.appendChild(a);
				document.getElementById(idText).click();

			}

			function deleteNode(idText){
 				 var el = document.getElementById(idText);
  				if (el !== null){
	    			el.remove();
  				}
			}
		</script>
    </body>
</html>